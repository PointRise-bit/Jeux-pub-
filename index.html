<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Mini Arcade</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#111827;
      --muted:#94a3b8;
      --text:#e5e7eb;
      --primary:#8b5cf6;
      --primary2:#22c55e;
      --danger:#ef4444;
      --border:rgba(255,255,255,.08);
      --shadow: 0 20px 50px rgba(0,0,0,.45);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial, sans-serif;
      background:
        radial-gradient(1200px 600px at 80% -10%, rgba(139,92,246,.25), transparent 55%),
        radial-gradient(900px 500px at 10% 110%, rgba(34,197,94,.18), transparent 55%),
        var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
    }
    .wrap{width:min(980px,100%);}
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:14px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
    }
    .logo{
      width:42px; height:42px; border-radius:14px;
      background: linear-gradient(135deg, rgba(139,92,246,.95), rgba(34,197,94,.85));
      box-shadow: var(--shadow);
    }
    .title{line-height:1}
    .title h1{margin:0; font-size:20px; letter-spacing:.2px}
    .title p{margin:6px 0 0; color:var(--muted); font-size:13px}

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
    }
    @media (min-width: 900px){
      .grid{grid-template-columns: 420px 1fr;}
    }

    .card{
      background: rgba(17,24,39,.85);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:16px;
      backdrop-filter: blur(10px);
    }

    .pill{
      display:inline-flex; gap:8px; align-items:center;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      color: var(--muted);
      font-size:12px;
    }

    .btns{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px;}
    button{
      appearance:none;
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      color: var(--text);
      padding:12px 14px;
      border-radius: 14px;
      cursor:pointer;
      font-size:14px;
      transition: transform .06s ease, background .2s ease, opacity .2s ease;
    }
    button:active{transform: scale(.98)}
    button.primary{
      border-color: rgba(139,92,246,.45);
      background: linear-gradient(135deg, rgba(139,92,246,.95), rgba(139,92,246,.65));
    }
    button.secondary{
      border-color: rgba(34,197,94,.45);
      background: linear-gradient(135deg, rgba(34,197,94,.9), rgba(34,197,94,.6));
      color:#052e16;
      font-weight:700;
    }
    button:disabled{opacity:.55; cursor:not-allowed}

    .small{
      color:var(--muted);
      font-size:13px;
      line-height:1.7;
      margin-top:10px;
    }

    .rightCard h2{margin:0 0 10px; font-size:16px}
    .canvasBox{
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:center;
      justify-content:center;
    }
    .canvasFrame{
      width:min(420px,100%);
      background: rgba(255,255,255,.03);
      border:1px solid var(--border);
      border-radius: 16px;
      padding:12px;
    }
    canvas{
      width:100%;
      height:auto;
      display:block;
      background: #0a1020;
      border-radius: 12px;
    }
    .hud{
      width:min(420px,100%);
      display:flex;
      justify-content:space-between;
      gap:10px;
      color:var(--muted);
      font-size:13px;
    }
    .toast{
      margin-top:10px;
      color: var(--muted);
      font-size:13px;
      line-height:1.7;
      text-align:center;
    }
    .danger{color:#fecaca}
    a{color:#c4b5fd}
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="title">
          <h1>AI Mini Arcade</h1>
          <p>ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø³ÙŠØ·Ø© + Ù„Ø¹Ø¨Ø© Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ø§Ù„ØµÙØ­Ø© (Ù…Ù„Ù ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·)</p>
        </div>
      </div>
      <span class="pill">âœ… ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ GitHub Pages</span>
    </header>

    <div class="grid">
      <!-- Left: Control panel -->
      <section class="card">
        <div class="pill">ğŸ® Ù„Ø¹Ø¨Ø© Ø¨Ø³ÙŠØ·Ø© (Ù‚ÙØ² ÙˆØªÙØ§Ø¯ÙŠ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚)</div>

        <h2 style="margin:12px 0 6px; font-size:16px;">Ø§Ù„ØªØ­ÙƒÙ…</h2>
        <div class="small">
          - Ø§Ø¶ØºØ· Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„Ù„Ù‚ÙØ².<br>
          - Ù‡Ø¯ÙÙƒ ØªØ¬Ø§ÙˆØ² Ø£ÙƒØ¨Ø± Ø¹Ø¯Ø¯ Ù…Ù…ÙƒÙ† Ù…Ù† Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©.<br>
          - Ø¥Ø°Ø§ Ø§ØµØ·Ø¯Ù…Øª Ø£Ùˆ Ø®Ø±Ø¬Øª Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø© ØªÙ†ØªÙ‡ÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø©.
        </div>

        <div class="btns">
          <button id="startBtn" class="primary">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
          <button id="restartBtn">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„</button>
          <button id="pauseBtn" class="secondary">Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª</button>
        </div>

        <div class="toast" id="msg">
          Ø¥Ø°Ø§ ÙƒÙ†Øª Ù„Ø§ ØªØ±Ù‰ Ø§Ù„Ù„Ø¹Ø¨Ø©: ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªÙØªØ­ Ù…Ù„Ù <b>index.html</b> Ø§Ù„ØµØ­ÙŠØ­ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ¶Ø§ÙØ©.
        </div>
      </section>

      <!-- Right: Game -->
      <section class="card rightCard">
        <h2>Ø§Ù„Ù„Ø¹Ø¨Ø©</h2>

        <div class="canvasBox">
          <div class="hud">
            <div>Ø§Ù„Ù†Ù‚Ø§Ø·: <b id="score">0</b></div>
            <div>Ø§Ù„Ø­Ø§Ù„Ø©: <b id="status">Ø¬Ø§Ù‡Ø²</b></div>
          </div>

          <div class="canvasFrame">
            <canvas id="gameCanvas" width="360" height="520"></canvas>
          </div>

          <div class="toast">
            Ø§Ø¶ØºØ· Ø¯Ø§Ø®Ù„ Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„Ù„Ù‚ÙØ².  
            <span class="danger">Ù…Ù„Ø§Ø­Ø¸Ø©:</span> Ù„Ø§Ø²Ù… ØªØ¶ØºØ· â€œØ§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©â€ Ø£ÙˆÙ„Ù‹Ø§.
          </div>
        </div>
      </section>
    </div>
  </div>

  <script>
    // ===== Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø© =====
    const startBtn   = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    const pauseBtn   = document.getElementById('pauseBtn');
    const scoreEl    = document.getElementById('score');
    const statusEl   = document.getElementById('status');
    const msgEl      = document.getElementById('msg');

    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // ===== Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© =====
    let running = false;
    let paused = false;
    let rafId = null;

    // Ø§Ù„Ù„Ø§Ø¹Ø¨
    let y, vy;

    // ÙÙŠØ²ÙŠØ§Ø¡
    const gravity = 0.55;
    const jumpV = -9.5;

    // Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨
    const pipeW = 64;
    const gapH = 155;
    let pipes = [];
    let score = 0;

    // ===== Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© =====
    function setStatus(text){
      statusEl.textContent = text;
    }
    function setMsg(text){
      msgEl.innerHTML = text;
    }

    function resetGame(){
      y = canvas.height / 2;
      vy = 0;
      score = 0;
      pipes = [{ x: canvas.width + 20, gapY: 200 }];
      scoreEl.textContent = score;
      setStatus('Ø¬Ø§Ù‡Ø²');
      paused = false;
      pauseBtn.textContent = 'Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª';
      drawSplash();
    }

    function drawSplash(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // Ø®Ù„ÙÙŠØ©
      const grd = ctx.createLinearGradient(0,0,0,canvas.height);
      grd.addColorStop(0, '#0b1220');
      grd.addColorStop(1, '#0a1020');
      ctx.fillStyle = grd;
      ctx.fillRect(0,0,canvas.width,canvas.height);

      // Ù†Øµ
      ctx.fillStyle = 'rgba(255,255,255,.9)';
      ctx.font = '22px Arial';
      ctx.fillText('AI Mini Arcade', 98, 220);

      ctx.fillStyle = 'rgba(255,255,255,.7)';
      ctx.font = '16px Arial';
      ctx.fillText('Ø§Ø¶ØºØ· "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©" Ø«Ù… Ø§Ø¶ØºØ· Ù„Ù„Ù‚ÙØ²', 60, 255);

      // Ù„Ø§Ø¹Ø¨
      drawPlayer(90, y);

      // Ø¥Ø·Ø§Ø± Ø®ÙÙŠÙ
      ctx.strokeStyle = 'rgba(255,255,255,.08)';
      ctx.strokeRect(0.5,0.5,canvas.width-1,canvas.height-1);
    }

    function drawPlayer(px, py){
      ctx.beginPath();
      ctx.arc(px, py, 14, 0, Math.PI*2);
      ctx.fillStyle = '#a78bfa';
      ctx.fill();
      ctx.closePath();

      // Ø¹ÙŠÙ† ØµØºÙŠØ±Ø©
      ctx.beginPath();
      ctx.arc(px+5, py-3, 2.5, 0, Math.PI*2);
      ctx.fillStyle = 'rgba(0,0,0,.45)';
      ctx.fill();
      ctx.closePath();
    }

    function drawPipes(){
      ctx.fillStyle = '#334155';
      for (const p of pipes){
        const topH = p.gapY - gapH/2;
        const botY = p.gapY + gapH/2;
        ctx.fillRect(p.x, 0, pipeW, topH);
        ctx.fillRect(p.x, botY, pipeW, canvas.height - botY);
      }
    }

    function drawHUD(){
      ctx.fillStyle = 'rgba(255,255,255,.85)';
      ctx.font = '16px Arial';
      ctx.fillText('Score: ' + score, 12, 26);
    }

    function gameOver(){
      running = false;
      cancelAnimationFrame(rafId);

      ctx.fillStyle = 'rgba(0,0,0,.55)';
      ctx.fillRect(0,0,canvas.width,canvas.height);

      ctx.fillStyle = '#fff';
      ctx.font = '24px Arial';
      ctx.fillText('Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©', 118, 240);

      ctx.font = '16px Arial';
      ctx.fillText('Ø§Ø¶ØºØ· "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„" Ø£Ùˆ Ø§Ø¶ØºØ· Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©', 45, 274);

      setStatus('Ø§Ù†ØªÙ‡Øª');
      startBtn.disabled = false;
      setMsg('âœ… Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù†ØªÙ‡Øª. ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¢Ù†.');
    }

    function update(){
      if (!running) return;
      if (paused){
        rafId = requestAnimationFrame(update);
        return;
      }

      // ÙÙŠØ²ÙŠØ§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨
      vy += gravity;
      y += vy;

      // Ø³Ù‚Ù/Ø£Ø±Ø¶
      if (y > canvas.height - 14 || y < 14){
        return gameOver();
      }

      // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨
      for (const p of pipes){
        p.x -= 2.8;
      }

      // Ø¥Ø¶Ø§ÙØ© Ø£Ù†Ø¨ÙˆØ¨ Ø¬Ø¯ÙŠØ¯
      const last = pipes[pipes.length - 1];
      if (last.x < 170){
        const gapY = 120 + Math.random() * 280;
        pipes.push({ x: canvas.width + 20, gapY });
      }

      // Ø­Ø°Ù Ø§Ù„Ù‚Ø¯ÙŠÙ… + Ø²ÙŠØ§Ø¯Ø© Ù†Ù‚Ø§Ø·
      if (pipes.length && pipes[0].x + pipeW < 0){
        pipes.shift();
        score++;
        scoreEl.textContent = score;
      }

      // Ø§ØµØ·Ø¯Ø§Ù…
      for (const p of pipes){
        const px = 90;
        const inX = (px + 14 > p.x) && (px - 14 < p.x + pipeW);
        if (inX){
          const topH = p.gapY - gapH/2;
          const botY = p.gapY + gapH/2;
          if (y - 14 < topH || y + 14 > botY){
            return gameOver();
          }
        }
      }

      // Ø±Ø³Ù…
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // Ø®Ù„ÙÙŠØ©
      const grd = ctx.createLinearGradient(0,0,0,canvas.height);
      grd.addColorStop(0, '#0b1220');
      grd.addColorStop(1, '#0a1020');
      ctx.fillStyle = grd;
      ctx.fillRect(0,0,canvas.width,canvas.height);

      drawPipes();
      drawPlayer(90, y);
      drawHUD();

      // Ø¥Ø·Ø§Ø± Ø®ÙÙŠÙ
      ctx.strokeStyle = 'rgba(255,255,255,.08)';
      ctx.strokeRect(0.5,0.5,canvas.width-1,canvas.height-1);

      rafId = requestAnimationFrame(update);
    }

    function jump(){
      if (!running) return;
      if (paused) return;
      vy = jumpV;
    }

    function startGame(){
      if (running) return;
      running = true;
      paused = false;
      startBtn.disabled = true;
      setStatus('ØªØ´ØºÙŠÙ„');
      setMsg('ğŸ® Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¯Ø£Øª! Ø§Ø¶ØºØ· Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„Ù„Ù‚ÙØ².');
      rafId = requestAnimationFrame(update);
    }

    function restartGame(){
      cancelAnimationFrame(rafId);
      running = false;
      resetGame();
      setMsg('ğŸ” ØªÙ…Ù‘Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„. Ø§Ø¶ØºØ· "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©".');
      startBtn.disabled = false;
    }

    function togglePause(){
      if (!running) return;
      paused = !paused;
      pauseBtn.textContent = paused ? 'Ù…ØªØ§Ø¨Ø¹Ø©' : 'Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª';
      setStatus(paused ? 'Ù…ØªÙˆÙ‚Ù Ù…Ø¤Ù‚ØªÙ‹Ø§' : 'ØªØ´ØºÙŠÙ„');
    }

    // ===== Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø± =====
    startBtn.addEventListener('click', startGame);
    restartBtn.addEventListener('click', restartGame);
    pauseBtn.addEventListener('click', togglePause);

    // Ø§Ù„Ø¶ØºØ· Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø© (Ù‚ÙØ²) + Ø¥Ø°Ø§ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©: Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø¨Ø³Ø±Ø¹Ø©
    canvas.addEventListener('pointerdown', () => {
      if (!running){
        // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù†ØªÙ‡Øª/Ø¬Ø§Ù‡Ø²Ø©: Ø§Ø¨Ø¯Ø£ Ù…Ø¨Ø§Ø´Ø±Ø©
        startGame();
        jump();
        return;
      }
      if (statusEl.textContent === 'Ø§Ù†ØªÙ‡Øª'){
        restartGame();
        startGame();
        return;
      }
      jump();
    });

    // ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ
    resetGame();
  </script>
</body>
</html>
